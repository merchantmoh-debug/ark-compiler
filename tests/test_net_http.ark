// @capabilities: net
// @flaky
// tests/test_net_http.ark

func handler(path) {
    return "Hello from Ark!"
}

print("Starting server on 8087...")
sys.net.http.serve(8087, handler)

print("Waiting for server...")
sys.time.sleep(1)

print("Sending request...")
res := sys.net.http.request("GET", "http://localhost:8087/")
status := res[0]
body := res[1]

print("Status:", status)
print("Body:", body)

if status == 200 {
    print("HTTP Test Passed")
} else {
    print("HTTP Test Failed")
}
