<div align="center">

<pre>
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  
   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  
   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•    â•šâ•â•     â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•

           THE ARK COMPILER v112.0 (PRIME)
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           A sovereign programming language.
           Built from zero to here in 11 days.
</pre>

[![License: AGPL v3](https://img.shields.io/badge/License-AGPL_v3-blue.svg)](https://www.gnu.org/licenses/agpl-3.0)
[![License: Commercial](https://img.shields.io/badge/License-Commercial-blue.svg)](LICENSE_COMMERCIAL)
![CI](https://img.shields.io/badge/CI-10/10_PASSING-brightgreen?style=for-the-badge)
![Tests](https://img.shields.io/badge/Tests-286_Passing-brightgreen?style=for-the-badge)
![Core](https://img.shields.io/badge/Core-RUST-red?style=for-the-badge)
![Parity](https://img.shields.io/badge/Intrinsic_Parity-100%25-green?style=for-the-badge)

</div>

---

## What Is Ark?

**Ark** is a programming language where **resource safety is a compile-time guarantee**, not a runtime hope. It features **enums, traits, impl blocks, pattern matching, lambdas**, a dual-backend compiler (VM + native WASM), a linear type system, 109 built-in intrinsics, a blockchain layer, a governance engine, an AI agent framework, and a browser-based playground â€” all built in **11 days**.

**Use it for:** Financial systems, cryptographic protocols, AI-native applications, smart contracts, and anywhere resource correctness is non-negotiable.

> **[ğŸ“œ Manifesto](docs/MANIFESTO.md)** â€” Why Ark exists.
> **[ğŸ“– User Manual](docs/USER_MANUAL.md)** â€” Complete language guide.
> **[ğŸ Play the Snake Game](https://merchantmoh-debug.github.io/ark-compiler/)** â€” Written in Ark, compiled to WASM, running in your browser right now.

---

## ğŸ“Š At a Glance (Day 11)

| Metric | Count |
|---|---|
| Rust source files | 31 |
| Total Rust LOC | 21,471 |
| Built-in intrinsics | 109 (100% Pythonâ†”Rust parity) |
| CLI subcommands | 9 |
| Standard library modules | 13 |
| Unit tests (all passing) | 286+ |
| CI jobs (all green) | 10/10 |
| Compilation backends | 3 (Bytecode VM, Native WASM, Tree-walker) |
| User manual | 1,000+ lines |

---

## ğŸš€ Language Features

### Core Language

Ark is a **real** programming language â€” not a DSL, not a transpiler, not a wrapper.

```ark
// Variables
name := "Ark"
pi := 3.14159
items := [1, "two", true, null]

// Functions (first-class, recursive, higher-order)
func factorial(n) {
    if n <= 1 { return 1 }
    return n * factorial(n - 1)
}

// Lambdas
double := |x| { x * 2 }
print(double(21))  // 42

// For loops, while loops, break, continue
for item in items {
    print(item)
}
```

### Enums & Pattern Matching

Full algebraic data types with destructuring pattern matching:

```ark
enum Shape {
    Circle(Float),
    Rectangle(Float, Float),
    Point
}

let s := Shape.Circle(5.0)

match s {
    Shape.Circle(r)       => print("Circle with radius: " + str(r))
    Shape.Rectangle(w, h) => print("Rectangle: " + str(w) + "x" + str(h))
    Shape.Point           => print("Just a point")
}
```

### Traits & Impl Blocks

Interface-based polymorphism:

```ark
trait Drawable {
    func draw(self) -> Unit
    func area(self) -> Float
}

impl Drawable for Circle {
    func draw(self) -> Unit {
        print("Drawing circle with radius " + str(self.radius))
    }
    func area(self) -> Float {
        return 3.14159 * self.radius * self.radius
    }
}
```

### Structs

Named, typed structures with field access:

```ark
struct Point {
    x: Float,
    y: Float
}

let p := {x: 1.0, y: 2.0}
p.x := 3.0
```

### Linear Type System

Resources that behave like **physical matter** â€” they cannot be copied, cannot be leaked, and must be consumed exactly once:

```ark
// 'coin' is a Linear resource â€” the compiler enforces Conservation of Value
func transfer(coin: Linear<Coin>, recipient: Address) {
    // 'coin' is MOVED here. The caller can NEVER touch it again.
    // Double-spend? COMPILE ERROR.
    // Forgot to use it? COMPILE ERROR.
}
```

---

## âš™ï¸ Compiler Architecture

Ark has **three backends**, all fully functional:

| Backend | File | LOC | Purpose |
|---|---|---|---|
| **Bytecode Compiler** | `compiler.rs` | 906 | Ark â†’ fast bytecode |
| **Stack VM** | `vm.rs` | 737 | Execute bytecode with intrinsic dispatch |
| **WASM Codegen** | `wasm_codegen.rs` | 3,865 | Ark â†’ native `.wasm` binary (WASI-compatible) |
| **WASM Runner** | `wasm_runner.rs` | 700 | Execute `.wasm` via wasmtime |
| **Browser Bridge** | `wasm.rs` | 358 | `wasm_bindgen` API for in-browser execution |
| **Tree-walker** | `eval.rs` | 733 | Interpreter (deprecated, test-only) |

### CLI â€” 9 Commands

```bash
ark run <file.ark>         # Run source or MAST JSON
ark build <file.ark>       # Compile to native .wasm binary
ark run-wasm <file.wasm>   # Execute compiled WASM via wasmtime
ark check <file.ark>       # Static linear type checker
ark parse <file.ark>       # Dump AST as JSON
ark debug <file.ark>       # Interactive step-through debugger
ark repl                   # Interactive REPL
ark wit <file.ark>         # Generate WIT interface definition
ark adn <file.ark>         # Run and output in ADN format
```

---

## ğŸ” Cryptography (Zero Dependencies)

All hand-rolled in Rust â€” no OpenSSL, no ring, no external crypto crates for core primitives:

| Primitive | Status |
|---|---|
| SHA-256 / SHA-512 | âœ… |
| Double SHA-256 | âœ… |
| HMAC-SHA256 / HMAC-SHA512 | âœ… |
| BIP-32 HD Key Derivation | âœ… `derive_key("m/44/0/0")` |
| Ed25519 Sign/Verify | âœ… (via `ed25519-dalek`) |
| Wallet Address Generation | âœ… (`ark:` prefix, checksum) |
| Constant-Time Comparison | âœ… |
| Merkle Root Computation | âœ… |
| Secure Random | âœ… (`/dev/urandom`) |

---

## â›“ï¸ Blockchain & Governance

### Blockchain (338 LOC)
Full Proof-of-Work chain: transactions, blocks, Merkle roots, chain validation, balance tracking, difficulty adjustment, code submission. Global singleton via `OnceLock<Mutex<Blockchain>>`.

### Governance Engine (839 LOC)
5-phase governed pipeline (Senseâ†’Assessâ†’Decideâ†’Actionâ†’Verify) with HMAC-signed `StepTrace` receipts, Monotone Confidence Constraint enforcement, Dual-Band orientation scoring, and Merkle audit trails.

---

## ğŸ¤– Multi-Agent AI Framework

Ark ships with a **built-in agent system** â€” not a plugin, a core feature:

```text
Task â†’ RouterAgent â†’ [CoderAgent | ResearcherAgent | ReviewerAgent] â†’ Review â†’ Result
```

| Feature | Details |
|---|---|
| **4 Specialist Agents** | Router, Coder (Ark-aware), Researcher, Reviewer |
| **Swarm Strategies** | `router`, `broadcast`, `consensus`, `pipeline` |
| **MCP Client** | JSON-RPC 2.0 over Stdio/HTTP/SSE |
| **Security** | AST-level sandboxing + Docker isolation |
| **Memory** | Fernet-encrypted + TF-IDF semantic recall |
| **LLM Backends** | Gemini â†’ OpenAI â†’ Ollama (auto-fallback) |

```ark
// AI is a first-class intrinsic â€” no SDK, no import
answer := sys.ai.ask("Explain linear types in 3 sentences.")
print(answer)

// Multi-agent swarm from Ark code
sys.vm.source("lib/std/ai.ark")
coder := Agent.new("You are a Rust expert.")
reviewer := Agent.new("You are a security auditor.")
swarm := Swarm.new([coder, reviewer])
results := swarm.run("Build a key-value store")
```

---

## ğŸ“š Standard Library (13 Modules)

| Module | Purpose | Key Functions |
|---|---|---|
| `math` | Mathematics | `sqrt`, `sin`, `cos`, `pow`, `abs`, `random` |
| `string` | String utilities | `length`, `upper`, `lower`, `split`, `join`, `replace` |
| `io` | Console I/O | `read_line`, `write` |
| `fs` | File system | `read`, `write`, `exists`, `size`, `read_bytes` |
| `net` | HTTP networking | `http_get`, `http_post` |
| `crypto` | Cryptography | `sha256`, `sha512`, `hmac`, `aes_encrypt`, `uuid` |
| `chain` | Blockchain | `height`, `balance`, `submit_tx`, `get_block` |
| `time` | Date/time | `now`, `sleep`, `format`, `elapsed` |
| `event` | Event system | `poll`, `push` |
| `result` | Error handling | `ok`, `err`, `is_ok`, `unwrap` |
| `audio` | Audio playback | `play`, `stop` |
| `ai` | AI/LLM agents | `ask`, `Agent.new`, `Agent.chat`, `Swarm.run` |
| `persistent` | Immutable data | `PVec`, `PMap` (trie + HAMT) |

---

## ğŸ§± Everything Else

| Subsystem | LOC | What It Does |
|---|---|---|
| **Hygienic Macros** | 522 | `gensym`-based macro expansion |
| **Interactive Debugger** | 248 | Breakpoints, step-in/out, variable inspection |
| **Content-Addressed AST (MAST)** | 218 | SHA-256 hashed AST nodes for integrity |
| **WIT Generator** | 477 | Ark types â†’ WebAssembly Interface Types |
| **WASM Host Imports** | 361 | Bridge intrinsics into WASM modules |
| **Persistent Data Structures** | 832 | PVec (trie) + PMap (HAMT) with structural sharing |
| **ADN (Ark Data Notation)** | 526 | Bidirectional serialization (like Clojure's EDN) |
| **FFI** | 120 | C ABI: `extern "C" fn ark_eval_string()` |
| **WASM Interop** | 428 | Load/call/inspect external `.wasm` modules |
| **VSCode Extension** | â€” | TextMate grammar, language config (v1.3.0) |
| **Browser Playground** | â€” | `site/wasm/index.html` test harness |
| **GitHub CI** | â€” | 10 jobs across 3 OS + Docker + WASM + Audit |

---

## ğŸ› ï¸ Quick Start

### Docker (Recommended)

```bash
git clone https://github.com/merchantmoh-debug/ark-compiler.git
cd ark-compiler
docker build -t ark-compiler .
docker run -it --rm ark-compiler
```

### From Source

```bash
git clone https://github.com/merchantmoh-debug/ark-compiler.git
cd ark-compiler

# Build the Rust compiler
cd core && cargo build --release && cd ..

# Install Python tooling
pip install -r requirements.txt

# Run your first program
echo 'print("Hello from Ark!")' > hello.ark
python meta/ark.py run hello.ark
```

### Try the Examples

```bash
# Wallet CLI â€” Secp256k1 + BIP39 in pure Ark
python3 meta/ark.py run apps/wallet.ark create "mypassword"

# Market Maker â€” Linear types enforcing no double-counting
python3 meta/ark.py run apps/market_maker.ark

# Snake Game â€” playable in the browser
python3 meta/ark.py run examples/snake.ark
# Open http://localhost:8000
```

---

## ğŸ“– Documentation

| Document | Description |
|---|---|
| **[User Manual](docs/USER_MANUAL.md)** | Complete language guide â€” enums, traits, functions, imports, crypto, blockchain, AI |
| **[Quick Start](docs/QUICK_START.md)** | 5-minute setup |
| **[API Reference](docs/API_REFERENCE.md)** | All 109 intrinsics with signatures and examples |
| **[Stdlib Reference](docs/STDLIB_REFERENCE.md)** | All 13 standard library modules |
| **[Manifesto](docs/MANIFESTO.md)** | The philosophy â€” why Ark exists |

---

## ğŸ›¡ï¸ Security Model

| Feature | Details |
|---|---|
| **Default** | Air-gapped â€” no network, no filesystem writes, no shell |
| **Capability Tokens** | `ARK_CAPABILITIES="net,fs_read,fs_write,ai"` |
| **Static Analysis** | Security scanner catches injection, path traversal, hardcoded secrets |
| **Import Security** | Path traversal â†’ `RuntimeError::UntrustedCode` |
| **Circular Import Protection** | `imported_files` HashSet |
| **Agent Sandbox** | AST analysis + Docker isolation for untrusted workloads |

---

## ğŸ“œ License

Dual Licensed: **AGPL v3** (Open Source) or **Commercial** (Sovereign Systems).

**Patent Notice:** Protected by US Patent Application #63/935,467.

---

<div align="center">

**21,471 lines of Rust. 286 tests. 13 stdlib modules. 109 intrinsics. 3 backends. 10/10 CI.**

**Built from nothing in 11 days.**

`[ SYSTEM: ONLINE ]`

</div>
