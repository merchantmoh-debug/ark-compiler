    Checking ark-0-zheng v0.1.0 (C:\Users\Stran\.gemini\antigravity\scratch\ark-compiler-prime\core)
error: cannot find derive macro `Serialize` in this scope
  --> core\src\runtime.rs:24:35
   |
24 | #[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
   |                                   ^^^^^^^^^
   |
help: consider importing this derive macro
   |
19 + use serde::Serialize;
   |

error: cannot find derive macro `Deserialize` in this scope
  --> core\src\runtime.rs:24:46
   |
24 | #[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
   |                                              ^^^^^^^^^^^
   |
help: consider importing this derive macro
   |
19 + use serde::Deserialize;
   |

error[E0412]: cannot find type `HashMap` in this scope
  --> core\src\runtime.rs:39:12
   |
39 |     Struct(HashMap<String, Value>),
   |            ^^^^^^^ not found in this scope
   |
help: consider importing this struct
   |
19 + use std::collections::HashMap;
   |

error[E0412]: cannot find type `HashMap` in this scope
  --> core\src\runtime.rs:62:16
   |
62 |     variables: HashMap<String, Value>,
   |                ^^^^^^^ not found in this scope
   |
help: consider importing this struct
   |
19 + use std::collections::HashMap;
   |

error[E0433]: failed to resolve: use of undeclared type `HashMap`
  --> core\src\runtime.rs:69:24
   |
69 |             variables: HashMap::new(),
   |                        ^^^^^^^ use of undeclared type `HashMap`
   |
help: consider importing this struct
   |
19 + use std::collections::HashMap;
   |

error[E0433]: failed to resolve: use of undeclared type `HashMap`
  --> core\src\runtime.rs:76:24
   |
76 |             variables: HashMap::new(),
   |                        ^^^^^^^ use of undeclared type `HashMap`
   |
help: consider importing this struct
   |
19 + use std::collections::HashMap;
   |

warning: unused import: `crate::ast::FunctionDef`
  --> core\src\runtime.rs:19:5
   |
19 | use crate::ast::FunctionDef;
   |     ^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

error[E0277]: the trait bound `runtime::Value: serde::Serialize` is not satisfied
   --> core\src\bytecode.rs:4:35
    |
  4 | #[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
    |                                   ^^^^^^^^^ unsatisfied trait bound
...
  7 |     Push(Value),
    |          ----- required by a bound introduced by this call
    |
help: the trait `Serialize` is not implemented for `runtime::Value`
   --> core\src\runtime.rs:25:1
    |
 25 | pub enum Value {
    | ^^^^^^^^^^^^^^
    = note: for local types consider adding `#[derive(serde::Serialize)]` to your `runtime::Value` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Serialize`:
              &'a T
              &'a mut T
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
              (T0, T1, T2, T3)
              (T0, T1, T2, T3, T4)
            and 141 others
note: required by a bound in `serialize_newtype_variant`
   --> C:\Users\Stran\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\serde_core-1.0.228\src\ser\mod.rs:958:21
    |
950 |     fn serialize_newtype_variant<T>(
    |        ------------------------- required by a bound in this associated function
...
958 |         T: ?Sized + Serialize;
    |                     ^^^^^^^^^ required by this bound in `Serializer::serialize_newtype_variant`
    = note: this error originates in the derive macro `Serialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `runtime::Value: serde::Deserialize<'de>` is not satisfied
    --> core\src\bytecode.rs:7:10
     |
   7 |     Push(Value),
     |          ^^^^^ unsatisfied trait bound
     |
help: the trait `Deserialize<'_>` is not implemented for `runtime::Value`
    --> core\src\runtime.rs:25:1
     |
  25 | pub enum Value {
     | ^^^^^^^^^^^^^^
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `runtime::Value` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a Path
               &'a [u8]
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
             and 155 others
note: required by a bound in `newtype_variant`
    --> C:\Users\Stran\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\serde_core-1.0.228\src\de\mod.rs:2182:12
     |
2180 |     fn newtype_variant<T>(self) -> Result<T, Self::Error>
     |        --------------- required by a bound in this associated function
2181 |     where
2182 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `VariantAccess::newtype_variant`

error[E0277]: the trait bound `runtime::Value: serde::Serialize` is not satisfied
    --> core\src\bytecode.rs:46:24
     |
  46 | #[derive(Debug, Clone, Serialize, Deserialize)]
     |                        ^^^^^^^^^ unsatisfied trait bound
...
  49 |     pub constants: Vec<Value>, // Using OpCode::Push(Value) directly for now, optimization later
     |     --- required by a bound introduced by this call
     |
help: the trait `Serialize` is not implemented for `runtime::Value`
    --> core\src\runtime.rs:25:1
     |
  25 | pub enum Value {
     | ^^^^^^^^^^^^^^
     = note: for local types consider adding `#[derive(serde::Serialize)]` to your `runtime::Value` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Serialize`:
               &'a T
               &'a mut T
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
               (T0, T1, T2, T3, T4)
             and 141 others
     = note: required for `Vec<runtime::Value>` to implement `Serialize`
note: required by a bound in `ast::_::_serde::ser::SerializeStruct::serialize_field`
    --> C:\Users\Stran\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\serde_core-1.0.228\src\ser\mod.rs:1917:21
     |
1915 |     fn serialize_field<T>(&mut self, key: &'static str, value: &T) -> Result<(), Self::Error>
     |        --------------- required by a bound in this associated function
1916 |     where
1917 |         T: ?Sized + Serialize;
     |                     ^^^^^^^^^ required by this bound in `SerializeStruct::serialize_field`
     = note: this error originates in the derive macro `Serialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `runtime::Value: serde::Deserialize<'de>` is not satisfied
    --> core\src\bytecode.rs:49:20
     |
  49 |     pub constants: Vec<Value>, // Using OpCode::Push(Value) directly for now, optimization later
     |                    ^^^^^^^^^^ unsatisfied trait bound
     |
help: the trait `Deserialize<'_>` is not implemented for `runtime::Value`
    --> core\src\runtime.rs:25:1
     |
  25 | pub enum Value {
     | ^^^^^^^^^^^^^^
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `runtime::Value` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a Path
               &'a [u8]
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
             and 155 others
     = note: required for `Vec<runtime::Value>` to implement `Deserialize<'_>`
note: required by a bound in `next_element`
    --> C:\Users\Stran\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\serde_core-1.0.228\src\de\mod.rs:1771:12
     |
1769 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1770 |     where
1771 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `runtime::Value: serde::Deserialize<'de>` is not satisfied
    --> core\src\bytecode.rs:49:20
     |
  49 |     pub constants: Vec<Value>, // Using OpCode::Push(Value) directly for now, optimization later
     |                    ^^^^^^^^^^ unsatisfied trait bound
     |
help: the trait `Deserialize<'_>` is not implemented for `runtime::Value`
    --> core\src\runtime.rs:25:1
     |
  25 | pub enum Value {
     | ^^^^^^^^^^^^^^
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `runtime::Value` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a Path
               &'a [u8]
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
             and 155 others
     = note: required for `Vec<runtime::Value>` to implement `Deserialize<'_>`
note: required by a bound in `next_value`
    --> C:\Users\Stran\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\serde_core-1.0.228\src\de\mod.rs:1916:12
     |
1914 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1915 |     where
1916 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `runtime::Value: serde::Deserialize<'de>` is not satisfied
  --> core\src\bytecode.rs:46:35
   |
46 | #[derive(Debug, Clone, Serialize, Deserialize)]
   |                                   ^^^^^^^^^^^ unsatisfied trait bound
   |
help: the trait `Deserialize<'_>` is not implemented for `runtime::Value`
  --> core\src\runtime.rs:25:1
   |
25 | pub enum Value {
   | ^^^^^^^^^^^^^^
   = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `runtime::Value` type
   = note: for types from other crates check whether the crate offers a `serde` feature flag
   = help: the following other types implement trait `Deserialize<'de>`:
             &'a Path
             &'a [u8]
             &'a str
             ()
             (T,)
             (T0, T1)
             (T0, T1, T2)
             (T0, T1, T2, T3)
           and 155 others
   = note: required for `Vec<runtime::Value>` to implement `Deserialize<'_>`
note: required by a bound in `ast::_::_serde::__private228::de::missing_field`
  --> C:\Users\Stran\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\serde-1.0.228\src\private\de.rs:26:8
   |
24 | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
   |        ------------- required by a bound in this function
25 | where
26 |     V: Deserialize<'de>,
   |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
   = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0308]: mismatched types
  --> core\src\eval.rs:42:66
   |
42 |                 scope.set(func_def.name.clone(), Value::Function(func_def.clone()));
   |                                                  --------------- ^^^^^^^^^^^^^^^^ expected `Rc<Chunk>`, found `FunctionDef`
   |                                                  |
   |                                                  arguments to this enum variant are incorrect
   |
   = note: expected struct `Rc<Chunk>`
              found struct `FunctionDef`
note: tuple variant defined here
  --> core\src\runtime.rs:36:5
   |
36 |     Function(Rc<Chunk>), // Bytecode Function
   |     ^^^^^^^^

error[E0308]: mismatched types
   --> core\src\eval.rs:170:66
    |
170 |                 scope.set(func_def.name.clone(), Value::Function(func_def.clone()));
    |                                                  --------------- ^^^^^^^^^^^^^^^^ expected `Rc<Chunk>`, found `FunctionDef`
    |                                                  |
    |                                                  arguments to this enum variant are incorrect
    |
    = note: expected struct `Rc<Chunk>`
               found struct `FunctionDef`
note: tuple variant defined here
   --> core\src\runtime.rs:36:5
    |
 36 |     Function(Rc<Chunk>), // Bytecode Function
    |     ^^^^^^^^

error[E0609]: no field `inputs` on type `Rc<Chunk>`
   --> core\src\eval.rs:231:61
    |
231 |                         if evaluated_args.len() != func_def.inputs.len() {
    |                                                             ^^^^^^ unknown field
    |
    = note: available fields are: `code`, `constants`

error[E0609]: no field `inputs` on type `Rc<Chunk>`
   --> core\src\eval.rs:234:42
    |
234 | ...                   func_def.inputs.len(),
    |                                ^^^^^^ unknown field
    |
    = note: available fields are: `code`, `constants`

error[E0609]: no field `inputs` on type `Rc<Chunk>`
   --> core\src\eval.rs:240:62
    |
240 |                         for (i, (param_name, _)) in func_def.inputs.iter().enumerate() {
    |                                                              ^^^^^^ unknown field
    |
    = note: available fields are: `code`, `constants`

error[E0609]: no field `body` on type `Rc<Chunk>`
   --> core\src\eval.rs:249:60
    |
249 |                         return Interpreter::eval(&func_def.body.content, &mut call_scope);
    |                                                            ^^^^ unknown field
    |
    = note: available fields are: `code`, `constants`

error[E0609]: no field `name` on type `&Rc<Chunk>`
   --> core\src\intrinsics.rs:426:57
    |
426 |         Value::Function(f) => print!("<Function:{}>", f.name),
    |                                                         ^^^^ unknown field
    |
    = note: available fields are: `code`, `constants`

error[E0369]: binary operation `==` cannot be applied to type `&Rc<Chunk>`
  --> core\src\runtime.rs:36:14
   |
24 | #[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
   |                        --------- in this derive macro expansion
...
36 |     Function(Rc<Chunk>), // Bytecode Function
   |              ^^^^^^^^^
   |
note: an implementation of `PartialEq` might be missing for `Chunk`
  --> core\src\bytecode.rs:47:1
   |
47 | pub struct Chunk {
   | ^^^^^^^^^^^^^^^^ must implement `PartialEq`
help: consider annotating `Chunk` with `#[derive(PartialEq)]`
  --> core\src\bytecode.rs:47:1
   |
47 + #[derive(PartialEq)]
48 | pub struct Chunk {
   |

warning: unreachable pattern
   --> core\src\vm.rs:165:17
    |
165 |                 _ => return Err(format!("Unimplemented opcode: {:?}", op)),
    |                 ^ no value can reach this
    |
note: multiple earlier patterns match some of the same values
   --> core\src\vm.rs:165:17
    |
 46 |                 OpCode::Push(v) => self.stack.push(v.clone()),
    |                 --------------- matches some of the same values
 47 |                 OpCode::Pop => {
    |                 ----------- matches some of the same values
...
 51 |                 OpCode::Add => self.binary_op(|a, b| intrinsics::intrinsic_add(vec![a, b]))?,
    |                 ----------- matches some of the same values
 52 |                 OpCode::Sub => self.binary_op(|a, b| intrinsics::intrinsic_sub(vec![a, b]))?,
    |                 ----------- matches some of the same values
...
165 |                 _ => return Err(format!("Unimplemented opcode: {:?}", op)),
    |                 ^ ...and 19 other patterns collectively make this unreachable
    = note: `#[warn(unreachable_patterns)]` (part of `#[warn(unused)]`) on by default

Some errors have detailed explanations: E0277, E0308, E0369, E0412, E0433, E0609.
For more information about an error, try `rustc --explain E0277`.
warning: `ark-0-zheng` (lib) generated 2 warnings
error: could not compile `ark-0-zheng` (lib) due to 20 previous errors; 2 warnings emitted
